define("p/index/index",["node","base","util","dom","json"],function(t,e,n){var o=t("node"),s=t("base"),i=t("util"),a=t("dom"),r=t("json");return function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){function o(){var t=n(2),e=n(3),o=e.all,s=new t({nplay:".play_btn",nstop:".stop_btn",npause:".pause_btn",nnext:".next_btn",npre:".pre_btn",mode:"random",auto:"true",volume:.25,musicList:[{name:"1. \u6591\u9a6c\u6591\u9a6c",path:"https://render.prefromoffice.alipay.net/p/u/i_rmsportal_5886_1021_08aa71edfbec0dad547e47ef83f98cfc618180ad.48.m4a"},{name:"2. \u661f\u4e4b\u6240\u5728",path:"https://i.alipayobjects.com/i/ecmng/mp3/201410/xzsz.mp3"},{name:"3. \u5343\u4e0e\u5343\u5bfb\u7247\u5c3e\u66f2\u53e3\u7434\u7248",path:"https://i.alipayobjects.com/i/ecmng/mp3/201410/qyqx.mp3"}]});s.on("error",function(t){console.log(["error",t.msg])}),s.on("status",function(t){switch(console.log(["status2",t.status,t.index,t]),t.status){case"play":o("#playlist li").hasClass("cur")&&o("#playlist li").removeClass("cur"),o("#playlist li").item(t.index).addClass("cur")}}),s.on("progress",function(t){console.log(["status2",t.curtime,t.counttime,t.progress,t.load]),o(".d2_time").text(t.curtime+"/"+t.counttime),o(".d2_load").css("width",t.progress/100*350)}),o(".playgoto_btn").on("click",function(){s.play(2)}),o(".random_btn").on("click",function(){s.set("mode","random")}),o(".order_btn").on("click",function(){s.set("mode","order")}),o(".single_btn").on("click",function(){s.set("mode","single")}),o(".setlist_btn").on("click",function(){s.setlist([{aaa:"bb"}])}),o("#volumeselect").on("change",function(t){var e=o(t.target).val();s.set("volume",e)}),o("#progressselect").on("change",function(t){var e=o(t.target).val();s.set("progress",e)}),o("#playlist li").on("click",function(t){o("#playlist li").hasClass("cur")&&o("#playlist li").removeClass("cur"),o(t.target).addClass("cur");var e=o(t.target).index();s.play(e)})}n(1),new o,t.exports=o},function(t,e){},function(t,e,n){function o(t){u=this;var e=r.isSupportAudio(),n=a.merge(c,t);switch(t.type){case"html5":a.mix(this,r.init(c));break;case"flash":a.mix(this,l.init(c));break;default:e?a.mix(this,r.init(c)):a.mix(this,l.init(c))}this._init(t);var s=this;o.superclass.constructor.call(s,t)}var s=n(3),i=n(4),a=n(5),r=n(6),l=n(7),u,c={nplay:null,nstop:null,npause:null,npre:null,nnext:null,musicList:null,mode:"order",auto:!1,volume:.25,buffer:1e3,type:"auto"},f={_bindEvent:function p(){},_init:function d(t){},play:function m(t){},stop:function h(){},pause:function v(){},pre:function y(){},next:function g(){},setList:function S(t){},_setMode:function _(t){},_setBuffer:function x(t){},_setVolume:function b(t){},_setProgress:function w(t){}};a.mix(f,{sendError:function E(t){u.fire("error",t)},sendStatus:function T(t){u.fire("status",t)},sendProgress:function L(t){u.fire("progress",t)},MODE:{ORDER:"order",RANDOM:"random",SINGLE:"single"},EVENT:{LOADING:"loading",RENDER:"render",STATU:"status",ERROR:"error"},STATUS:{PLAY:"play",PAUSE:"pause",STOP:"stop",LOADING:"loading",RENDER:"render"}}),a.extend(o,i,f,{ATTRS:{mode:{value:c.mode,setter:function N(t){return this._setMode(t),t}},buffer:{value:c.buffer,setter:function O(t){return this._setBuffer(t),t}},volume:{value:c.volume,setter:function k(t){return this._setVolume(t),t}},progress:{value:0,setter:function F(t){return this._setProgress(t),t}}}}),t.exports=o},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=i},function(t,e,n){function o(){m={_bindEvent:function t(){l.all(d.nstop)&&l.all(d.nstop).on("click",function(t){f.stop()}),l.all(d.nplay)&&l.all(d.nplay).on("click",function(t){f.play()}),l.all(d.npause)&&l.all(d.npause).on("click",function(t){f.pause()}),l.all(d.npre)&&l.all(d.npre).on("click",function(t){f.pre()}),l.all(d.nnext)&&l.all(d.nnext).on("click",function(t){f.next()})},_createAudio:function e(){p=document.createElement("audio")},_progress_handle:function n(){var t=r(p.currentTime),e=r(p.duration),n=(p.currentTime/p.duration*100).toFixed(2);t!=y&&"NaN:NaN"!=e&&(y=t,T=p.duration,g=n,y==e&&(n=100),f.sendProgress({index:v,curtime:t,counttime:e,progress:n}))},_ended_handle:function o(){f.stop("ended")},_init:function c(t){f=this,u.mix(d,t),this._bindEvent(),this._initAudio()},_initAudio:function E(){p.addEventListener("timeupdate",this._progress_handle,!0),p.addEventListener("ended",this._ended_handle,!0),p.addEventListener("loadedmetadata",function(t){}),this.setList(d.musicList),d.auto&&this.play("first_delay_sendstatus")},play:function L(t){if(null==t&&(t=-1),t>S)return void s("\u64ad\u653e\u97f3\u4e50\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4");t>=0&&(v=t),p.addEventListener("canplaythrough",function(){},!1),p.addEventListener("loadedmetadata",function(){},!1),b||(p.src=h[v].path),p.play(),x=!0,b=!1,"first_delay_sendstatus"==t?setTimeout(function(){i("play")},10):i("play")},stop:function N(t){x&&(p.currentTime=0,p.pause(),x=!1),i("stop"),null!=t&&a()},pause:function O(){x&&(_=p.currentTime,p.pause(),b=!0,i("pause"))},pre:function k(){v>0&&v--,this.stop(null),this.play()},next:function F(){v<S&&v++,this.stop(null),this.play()},setList:function M(t){if(null==(h=t||{})||h.length<=0)return void s("\u8bf7\u68c0\u67e5\u6b4c\u66f2\u5217\u8868, \u53c2\u8003 [{name:'name', path:'path'}]");S=h.length-1,v=0},_setMode:function I(t){w=t},_setBuffer:function P(t){p.buffer=t},_setVolume:function A(t){p.volume=t},_setProgress:function W(t){p.currentTime=t/100*T}}}function s(t){var e=t||"\u9519\u8bef\u5f02\u5e38!",n=2e3,o={type:2e3,msg:e};f.sendError(o)}function i(t){var e=t||null,n=v,o=h[v].name||null,s=h[v].path||null,i=w||null,a={status:e,index:n,name:o,path:s,mode:i};f.sendStatus(a)}function a(){switch(w){case c.ORDER:v=v==S?0:v+1,f.play(v);break;case c.RANDOM:v=Math.ceil(Math.random()*S),f.play(v);break;case c.SINGLE:f.play(v);break;case c.STOP:}}function r(t){var e=Math.floor(t/60),n=Math.floor(t%60);return n<10&&(n="0"+n),e<10&&(e="0"+e),e+":"+n}var l=n(3),u=n(5),c={ORDER:"order",RANDOM:"random",STOP:"stop",SINGLE:"single"},f,p,d,m,h,v,y,g,S,_,x,b,w,E,T;t.exports={init:function L(t){return d=t,o(),m},isSupportAudio:function N(){return p=document.createElement("audio"),p.contentType="Content-Type:application/octet-stream",!!p.canPlayType}}},function(t,e,n){function o(){c={_bindEvent:function t(){s.all(u.nstop)&&s.all(u.nstop).on("click",function(t){l.callSWF("onStop")}),s.all(u.nplay)&&s.all(u.nplay).on("click",function(t){l.callSWF("onPlay")}),s.all(u.npause)&&s.all(u.npause).on("click",function(t){l.callSWF("onPause")}),s.all(u.npre)&&s.all(u.npre).on("click",function(t){l.callSWF("onPre")}),s.all(u.nnext)&&s.all(u.nnext).on("click",function(t){l.callSWF("onNext")})},_createSWF:function e(){l=new i({src:"//gw.alicdn.com/tps/i2/T1iNTbFbddXXXtxVjX.swf",attrs:{width:1,height:1},params:{flashVars:{mp3list:u.musicList,auto:u.auto,mode:u.mode,volume:u.volume,buffer:u.buffer},allowscriptaccess:"always",quality:"low"},render:"#ks-musicplayer"});var t=setInterval(function(){switch(l.get("status")){case i.Status.SUCCESS:r.sendStatus({status:"render",swfid:l.get("el").id}),setTimeout(function(){l.callSWF("setSWFID",[l.get("el").id])},100),clearInterval(t);break;case i.Status.NOT_INSTALLED:r.sendError({type:2e3,msg:i.Status.NOT_INSTALLED}),clearInterval(t);break;case i.Status.TOO_LOW:r.sendError({type:2e3,msg:i.Status.TOO_LOW}),clearInterval(t)}},10)},_createDIV:function n(){var t='<div id="ks-musicplayer" style="position:absolute;left: -9999px; top: -9999px; width:1px; height:1px"></div>';s.one("body").append('<div id="ks-musicplayer" style="position:absolute;left: -9999px; top: -9999px; width:1px; height:1px"></div>')},_init:function o(t){r=this,a.mix(u,t),this._createDIV(),this._createSWF(),this._bindEvent(),this._setfire()},_setfire:function f(){S.MusicPlayer=r,a.mix(S.MusicPlayer,{error:function t(e){r.sendError(e)},status:function e(t){r.sendStatus(t)},progress:function n(t){r.sendProgress(t)}})},play:function p(t){null==t&&(t=-1),l.callSWF("onPlay",[t])},stop:function d(){l.callSWF("onStop")},pause:function m(){l.callSWF("onPause")},pre:function h(){l.callSWF("onPre")},next:function v(){l.callSWF("onNext")},setList:function y(t){null==t&&(t={}),l.callSWF("setMP3List",[t])},_setMode:function g(t){l.callSWF("setMode",[t])},_setBuffer:function _(t){l.callSWF("setBuffer",[t])},_setVolume:function x(t){l.callSWF("setVolume",[t])},_setProgress:function b(t){l.callSWF("setProgress",[t])}}}var s=n(3),i=n(8),a=n(5),r,l,u,c;t.exports={init:function f(t){return u=t,o(),c}}},function(t,e,n){t.exports=n(9),t.exports.version="6.0.2"},function(t,e,n){function o(t){var e=this,n;t=t||{};for(n in M)n in t||(t[n]=M[n]);for(n in t)e[n]=t[n];var s=e.expressInstall,i,a,l,c=e.htmlMode,f,p=e.params,m=e.attrs,h=e.document,v=d.create("<span>",undefined,h),g=e.elBefore,S=e.src,_=e.version;if(l=m.id=m.id||"ks-swf-"+ +new Date+"-"+I++,!T())return void(e.status=o.Status.NOT_INSTALLED);_&&!N(_)&&(e.status=o.Status.TOO_LOW,s&&(S=s,(!("width"in m)||!/%$/.test(m.width)&&parseInt(m.width,10)<310)&&(m.width="310"),(!("height"in m)||!/%$/.test(m.height)&&parseInt(m.height,10)<137)&&(m.height="137"),f=p.flashVars=p.flashVars||{},f.MMredirectURL=location.href,f.MMplayerType=y?"ActiveX":"PlugIn",f.MMdoctitle=h.title.slice(0,47)+" - Flash Player Installation")),a="full"===c?u(S,m,p):r(S,m,p),e.html=a,g?d.insertBefore(v,g):d.append(v,e.render),"outerHTML"in v?v.outerHTML=a:v.parentNode.replaceChild(d.create(a),v),i=d.get("#"+l,h),e.swfObject="full"===c?y?i:i.parentNode:i,e.el=i,e.status||(e.status=o.Status.SUCCESS)}function s(t){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}function i(t){var e="",n,o,s,i=[],a=d.nodeName(t);if("object"===a)for(e=d.attr(t,"data"),e&&i.push(t),n=t.childNodes,o=0;o<n.length;o++)s=n[o],1===s.nodeType&&("movie"===(d.attr(s,"name")||"").toLowerCase()?i.push(s):"embed"===d.nodeName(s)?i.push(s):"object"===d.nodeName(n[o])&&i.push(s));else"embed"===a&&i.push(t);return i}function a(t){var e=x;for(var n in t){var o=t[n];n=n.toLowerCase(),n in F?e+=f(n,o):n===_&&(e+=f(n,c(o)))}return e}function r(t,e,n){return l(t,e,n,y)+b+"/"+O+w}function l(t,e,n,o){var s,i=x,r=x;for(var l in e){i+=p(l,e[l])}return o?(i+=p("classid",S),r+=f("movie",t)):(i+=p("data",t),i+=p("type",g)),r+=a(n),s=b+O+i+w+r}function u(t,e,n){var o,s;return y?(o=l(t,e,n,1),delete e.id,delete e.style,s=l(t,e,n,0)):(s=l(t,e,n,0),delete e.id,delete e.style,o=l(t,e,n,1)),o+s+b+"/"+O+w+b+"/"+O+w}function c(t){var e=[],n;for(var o in t){var s=t[o];"string"!=typeof s&&(s=m.stringify(s)),s&&e.push(o+"="+k(s))}return n=e.join("&")}function f(t,e){return'<param name="'+t+'" value="'+e+'"></param>'}function p(t,e){return" "+t+'="'+e+'"'}var d=n(10),m=n(11),h=n(12),v="//g.alicdn.com/kg/swf/6.0.2/swf/expressInstall.swf",y=!!window.ActiveXObject,g="application/x-shockwave-flash",S="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",_="flashvars",x="",b="<",w=">",E=document,T=h.fpv,L=h.fpvGEQ,N=h.fpvGTE,O="object",k=encodeURIComponent,F={wmode:x,allowscriptaccess:x,allownetworking:x,allowfullscreen:x,play:"false",loop:x,menu:x,quality:x,scale:x,salign:x,bgcolor:x,devicefont:x,hasPriority:x,base:x,swliveconnect:x,seamlesstabbing:x},M={expressInstall:"//g.alicdn.com/kg/swf/6.0.2/swf/expressInstall.swf",version:"9",params:{},attrs:{},render:document.body,document:E,htmlMode:"default"},I=1;o.prototype={constructor:o,get:function P(t){return this[t]},set:function A(t,e){this[t]=e},callSWF:function W(t,e){var n=this.el,o,s;e=e||[];try{n[t]&&(o=n[t].apply(n,e))}catch(i){s="",0!==e.length&&(s='"'+e.join('", "')+'"'),o=new Function("swf","return swf."+t+"("+s+");")(n)}return o},destroy:function D(){var t=this,e=t.swfObject;y?(e.style.display="none",function n(){4===e.readyState?s(e):setTimeout(n,10)}()):e.parentNode.removeChild(e)}},o.getSrc=function(t){t=d.get(t);var e=i(t)[0],n=e&&d.nodeName(e);return"embed"===n?d.attr(e,"src"):"object"===n?d.attr(e,"data"):"param"===n?d.attr(e,"value"):null},o.Status={TOO_LOW:"flash version is too low",NOT_INSTALLED:"flash is not installed",SUCCESS:"success"},o.HtmlMode={DEFAULT:"default",FULL:"full"},o.fpv=T,o.fpvGEQ=L,o.fpvGTE=N,t.exports=o},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e){function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(){var t,e="ShockwaveFlash";if(navigator.plugins&&navigator.mimeTypes.length)t=(navigator.plugins["Shockwave Flash"]||0).description;else try{t=new f.ActiveXObject(e+"."+e).GetVariable("$version")}catch(n){}return t?s(t):undefined}function s(t){return t.match(/\d+/g).splice(0,3)}function i(t){var e="string"==typeof t?s(t):t,o=t;return n(e)&&(o=parseFloat(e[0]+"."+a(e[1],3)+a(e[2],5))),o||0}function a(t,e){t=t||0,t+="";var n=e+1-t.length;return new Array(n>0?n:0).join("0")+t}function r(t){return(t||c)&&(c=!1,u=o()),u}function l(t,e){return i(r(e))>=i(t)}var u,c=!0,f=window;t.exports={fpv:r,fpvGTE:l}}])}),KISSY.use("p/index/index");