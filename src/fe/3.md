# 代码规范

<mark>在无论是在编码前，编码后，还是编码中，都把规范放在首要位置。你将会参与各种项目，产出无数行代码。 </mark><br>

###HTML规范
####1.基本规范
- **推荐脚手架**

    	<!DOCTYPE html>
		<html>
  		<head>
    		<meta charset="UTF-8">
    		<meta lang="zh">
    		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    		<meta name="renderer" content="webkit">
    		<meta name="description" content="">
    		<meta name="keyword" content="">
    		<title>芝麻信用</title>
    		<link rel="stylesheet" href="example.css">
  		</head>
  		<body>
      		<script src="example.js"></script>
  		</body>
		</html>
	- 标签名称和标签属性统一使用小写
	- 根据 HTML5 规范, 通常在引入 CSS 和 JavaScript 时不需要指明 type，因为 text/css 和 text/javascript 分别是他们的默认值。
	- 鼓励网站作者在 html 元素上指定 lang 属性，来指出页面的语言。这样做会有助于语言合成工具来确定怎样发音，以及翻译工具决定使用的规则，等等。
	- Internet Explorer 支持使用兼容性 <meta> 标签来指定使用什么版本的 IE 来渲染页面。如果不是特殊需要，通常通过 edge mode 来通知 IE 使用最新的兼容模式。



####2.属性规范
- **html属性使用双引号**

		<link rel="stylesheet" href="example.css">

- **Boolean 属性**
Boolean 属性指不需要声明取值的属性。XHTML 需要每个属性声明取值，但是 HTML5 并不需要。

		<!-- bad -->
		<input type="text" disabled="disabled">
		<input type="checkbox" value="1" checked="checked">
		<select>
			<option value="1" selected="selected">1</option>
		</select>

		<!-- good -->
		<input type="text" disabled>
		<input type="checkbox" value="1" checked>
		<select>
			<option value="1" selected>1</option>
		</select>
- **自定义属性**
建议自定义属性必须以 data- 为前缀，便于阅读。

		<!-- bad -->
		<a modal="toggle" href="#">
  			Example link
		</a>

		<!-- good -->
		<a data-modal="toggle" href="#">
 			Example link
		</a>

- **属性顺序**
Classes 是为高可复用组件设计的，所以他们处在第一位。Ids 更加具体而且应该尽量少使用（例如, 页内书签），所以他们处在第二位。

		<!-- bad -->
		<a href="#" data-modal="toggle" id="... class="..."">
  			Example link
		</a>

		<input type="text" class="form-control">

		<!-- good -->
		<a class="..." id="..." data-modal="toggle" href="#">
  			Example link
		</a>

		<input class="form-control" type="text">
- **标签规范**
不要在自动闭合标签的结尾处使用斜线，如 `<br>、<hr>、<input>、<meta>、<source>`

- **命名规范**
	- 对于需要自定义属性，属性名命名统一使用 data- 前缀，具体参考 [custom-data-attribute](http://w3c.github.io/html/dom.html#custom-data-attribute)
	- class 命名和 CSS **编码规范中的保持一致**
	- id 命名，当作为 JS 钩子使用 时，以 J_ 为前缀，后面接大驼峰命名，且这类选择器不能出现在 css 中，例如 J_ExampleIdForJs。其他使用用法，例如充当锚点，label 对应 input 的 id，都正常默认使用即可。

- **注释规范**
由于 html 代码一般不会经过预处理，出于安全考虑，html 代码中不能出现任何关于业务相关敏感信息的注释。



###css编码规范
####基本规范
- **缩进使用四个空格**
- **在每个声明块的左花括号前添加一个空格**

		/* bad */
		.mod-example{
  			padding-left: 15px;
		}

		/* good */
		.mod-example {
  			padding-left: 15px;
		}

- **声明块的右花括号应当单独成行**

		/* bad */
		.mod-example {
		  padding-left: 15px;}

		/* good */
		.mod-example {
		  padding-left: 15px;
		}
- **每条声明语句的 : 后应该插入一个空格，前面无空格**

		/* bad */
		.mod-example {
		  padding-left:15px;
		}

		/* good */
		.mod-example {
		  padding-left: 15px;
		}


- **所有声明语句都以分号结尾，不能省略不写**

		 /* bad */
		.mod-example {
		  padding-left: 15px
		}

		/* good */
		.mod-example {
		  padding-left: 15px;
		}

####选择器使用规范
- **为选择器分组时，将单独的选择器单独放在一行**

		/* bad */
		.selector, .selector-secondary {
		  padding-left: 15px;
		}

		/* good */
		.selector,
		.selector-secondary {
		  padding-left: 15px;
		}
- **为选择器中的属性添加双引号**

		/* bad */
		.selector[type=text] {
		  padding-left: 15px;
		}

		/* good */
		.selector[type="text"] {
		  padding-left: 15px;
		}
- **建议选择器层级不要超过5级**

		/* bad */
		.main .top .left .mod-a .content .detail {
		  padding-left: 15px;
		}

		/* good */
		.mod-a .content .detail {
		  padding-left: 15px;
		}


####属性规范
- **属性顺序**
建议相关的属性说明放在一组，并按照下面的顺序排列：
1.定位（position、left、right、top、bottom、z-index）
2.盒子模型（display、float、width、height、margin、padding、border、border-radius）
3.排印（font、color、background、line-height、text-align）
**由于定位可以从正常的文档流中移除元素，并且还能覆盖盒模型相关的样式，因此排在首位。而盒模型决定了组件的尺寸和位置，所以排第二位。排印只是影响元素的细节样式变化，所以放第三位。**

		.mod-example {
		  /* 定位 */
		  position: absolute;
		  top: 0;
		  right: 0;
		  bottom: 0;
		  left: 0;
		  z-index: 100;
		  /* 盒模型 */
		  display: block;
		  float: right;
		  width: 100px;
		  height: 100px;
		  margin: 15px auto;
		  padding: 10px 15px;
		  border: 1px solid #ccc;
		  /* 排印 */
		  font: normal 13px "Helvetica Neue", sans-serif;
		  line-height: 1.5;
		  color: #333;
		  background-color: #f5f5f5;
		  text-align: center;
		}

- **0 和 单位**

		/* bad */
		.mod-example {
		  padding-left: 0px;
		}

		/* good */
		.mod-example {
		  padding-left: 0;
		}
- **颜色值十六进制表示法**

		/* bad */
		.mod-example {
		  color: #cccccc;
		  background-color: #efefef;
		}

		/* good */
		.mod-example {
		  color: #ccc;
		  background-color: #efefef;
		}

- **小数**
对于使用到小数的情况，省略前边的 0

		/* bad */
		.mod-example {
		  opacity: 0.5;
		}

		/* good */
		.mod-example {
		  opacity: .5;
		}


- **引号**
属性选择器或属性值用双引号 "" 括起来，而 URI 值 url() 不要使用任何引号

		/* bad */
		body {
		  font-family: open sans, arial, sans-serif;
		  background-image: url('http://taobao.com/');
		}

		/* good */
		body {
		  font-family: "open sans", arial, sans-serif;
		  background-image: url(http://taobao.com/);
		}

###注释规范
- **代码注释**
代码是由人来编写和维护的。保证你的代码是描述性的，包含好的注释，并且容易被他人理解。好的代码注释传达上下文和目标。不要简单地重申组件或者 class 名称。

		/* bad */

		/* header */
		.modal-header {
		}

		/* good */

		/* aba 页面的header */
		.modal-header {
		}

- **文件注释**

		/**
		 * 这个文件的作用是什么，巴拉巴拉
		 */
		body {
		  color: red;
		}

###命名规范
- **命名**
 小写字母加连字符(不是下划线，也不是驼峰命名法);
 需要在 javascript 中使用的类名以 J_ 开头，接“大驼峰”命名。例如J_ExampleClass， 并且这类的 class 不能出现在 CSS 文件中。


		/* bad */
		.mod_example {
		  padding-left: 15px;
		}
		.modExample {
		  padding-left: 15px;
		}

		/* good */
		.mod-example {
		  padding-left: 15px;
		}

		<!-- Bad -->
		<div class="mod-example"></div>

		<!-- Good -->
		<div class="J_ExampleClass">Just a Example</div>

###JavaScript编码规范
- **缩进**
统一使用两空格缩进
- **引号**
统一使用单引号

- **编码**
统一使用 utf-8 编码

- **单行字符长度限制**
单行代码字符长度尽量不超过 80 个字符

理由：代码更加清晰，便于阅读

- **严格模式**
推荐总是在 js 文件头部声明使用严格模式，这样可以使你的代码更加健壮，参考 MDN 严格模式

		'use strict';

		// ...
		- **建议使用字面量来代替构造函数

		// bad
		var arr = new Array(1, 2, 3);
		var obj = new Object();

		// good
		var arr = [1, 2, 3];
		var obj = {};

###代码规范

- **对象**
不要使用保留字 reserved words 作为对象属性，IE8 下不支持。参考

		// bad
		var superman = {
		  class: 'superhero'
		};

		// good
		var superman = {
		  className: 'superhero'
		};
- **数组**
使用 Array#push 为数组添加元素

		var someStack = [];

		// bad
		someStack[someStack.length] = 'test';

		// good
		someStack.push('test');
- **字符串**
超过80个字符的字符串应该使用字符串连接换行

		// bad
		var errorMessage = 'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.';

		// good
		var errorMessage = 'This is a super long error that ' +
		  'was thrown because of Batman.' +
		  'fast.';
- **函数**
不要在非函数块（if, while 等）里声明函数，如有需要，可以把函数赋值给一个变量。

		// bad
		if (currentUser) {

		  function test() {
		    console.log('Nope.');
		  }

		  test();
		}

		// good
		if (currentUser) {

		  var test = function() {
		    console.log('Yup.');
		  };

		  test();
		}
- **绝对不要把参数命名为 arguments, 这将会覆盖arguments 对象.**

		// bad
		function nope(name, options, arguments) {
		  // ...stuff...
		}

		// good
		function yup(name, options, args) {
		  // ...stuff...
		}
- **属性**
访问对象的属性时，尽可能使用 .

		var superman = {
		  age: 12
		};

		// bad
		var age = superman['age'];

		// good
		var age = superman.age;
- **变量**
总是使用 var 来声明变量，如果不这么做将导致产生全局变量，我们要避免污染全局命名空间。

		// bad
		superPower = new SuperPower();

		// good
		var superPower = new SuperPower();
推荐使用多个 var 声明多个变量。理由：方便增删；多 var 可以更好的帮助养成良好的习惯，而不发生遗漏 var 而导致全局变量的风险。

		// bad
		var first = 1,
		  second = 2,
		  third = 3;

		// good
		var first = 1;
		var second = 2;
		var third = 3;
- **条件表达式和等号**
尽量使用 === 和 !==
条件表达式的强制类型转换遵循以下规则：

对象 被计算为 true
Undefined 被计算为 false
Null 被计算为 false
布尔值 被计算为 布尔的值
数字 如果是 +0, -0, or NaN 被计算为 false , 否则为 true
字符串 如果是空字符串 '' 则被计算为 false, 否则为 true
0, 值为 0 时，要特别注意
更多信息请阅读 Truth Equality and JavaScript.

- **块**
不要省略花括号

		// bad
		if (test)
		  return false;

		// bad
		if (test) return false;

		// good
		if (test) {
		  return false;
		}
花括号后应该换行

		// bad
		function (test) { return false; }

		// good
		function() {
		  return false;
		}
- **空白**
操作符之间需要有空格

		// bad
		var a=1+2;

		// good
		var a = 1 + 2;
三元操作符前后都要加空格

		// base
		var isRight = result === 0? false: true;

		// good
		var isRight = result === 0 ? false : true;
函数空格

		// bad
		function add(a,b) {      // 多个参数时逗号后要加空格
		}
		function add(a, b){      // 花括号前需要加空格
		}
		function add( a, b ) {   // 参数两边不需要加空格
		}
		function add (a, b) {    // 函数名和参数括号前不需要加空格
		}

		// good
		function add(a, b) {
		}
块级代码 (if, else, for 等)

		// bad
		if(hasName){
		}
		//bad
		if ( hasName ) {
		}

		// good
		if (hasName) {
		}
对象

		// bad
		var base = {
		  width : 100,
		  height:200
		};

		// good
		var base = {
		  width: 100,
		  height: 200
		};
key, value 之间只需要一个空格，因为这样更加自然与易读。

		// bad
		{
		  a           : 'short',
		  looooongname: 'long'
		}

		// bad
		{
		  a:            'short',
		  looooongname: 'long'
		}

		// good
		{
		  a: 'short',
		  looooongname: 'long'
		}
- **避免使用过长的链式调用；调用比较长时建议使用换行和缩进来组织结构**

		// bad
		$('#items').find('.selected').highlight().end().find('.open').updateCount();

		// good
		$('#items')
		  .find('.selected')
		    .highlight()
		    .end()
		  .find('.open')
		    .updateCount();
- **逗号**
逗号后置

		// bad
		var options = {
		    name: '马云'
		  , gender: '男'
		  , age: 1024
		};

		// good
		var options = {
		  name: '马云',
		  gender: '男',
		  age: 1024
		};
不要加多余的逗号，这可能会在 IE 下引起错误，同时如果多一个逗号某些 ES3 的实现会导致数组长度加1。

		// bad
		var hero = {
		  firstName: 'Kevin',
		  lastName: 'Flynn',
		};

		var heroes = [
		  'Batman',
		  'Superman',
		];

		// good
		var hero = {
		  firstName: 'Kevin',
		  lastName: 'Flynn'
		};

		var heroes = [
		  'Batman',
		  'Superman'
		];
- **类型转换**
在语句的开始执行类型转换
建议使用强制类型转换

		var str = 123;

		// bad
		str = '' + 123;

		// good
		str = String(str);
		对数字使用 parseInt 并且总是带上类型转换的基数，备注：parseFloat 方法没有基数参数

		var inputValue = '4';

		// bad
		var val = + inputValue;

		// bad
		var val = parseInt(inputValue);

		// good
		var val = Number(inputValue);

		// good
		var val = parseInt(inputValue, 10);
		布尔值:

		var age = 0;

		// bad
		var hasAge = new Boolean(age);

		// good
		var hasAge = Boolean(age);
###命名规范

原则: 所有的命名必须有语义，所以永远不要使用单个字符命名。

- **变量**
变量声明必须使用 var, 命名规范统一为小驼峰命名法：即第一个单词首字母小写，其余单词的首字母大写。

		// dirty
		eventType = 'click';

		// bad
		var eventtype = 'click';

		// bad
		var EventType = 'click';

		// good
		var eventType = 'click';
		对象字面量命名使用小驼峰

		// bad
		var Base = {
		  isOnline: function() {
		    // ...
		  }
		};
		return Base;

		// good
		var base = {
		  isOnline: function() {
		    // ...
		  }
		};
		return base;
- **常量**
常量的命名使用全大写字母，多单词使用下划线分开，例如：

		// good
		var WELCOME_TEXT = 'Hello World';
- **构造函数/类**
构造函数/类使用大驼峰命名，即所有单词首字母大写。如下示例：

		// good
		function MenuButton() {
		}

		MenuButton.prototype.show = function () {
		};
- **函数名**
普通函数名使用小驼峰，尽可能的选用动词作为名字。

- **布尔值**
尽量使用表示状态的词汇来命名布尔值：可以是形容词、副词，或充当状语成分的词组。这种情况下，不要添加诸如 is, has, can 的前缀，因为那样看上去像是命名一个方法。

		// good
		this.available = true;
		this.isAvailable = function () {
		  return this.available;
		};

		// bad
		this.isAvailable = true;
如果无法通过上一种情况来命名，比如描述的目标是一个名词，那么可以添加诸如 is, has, can 的前缀。

		// good
		this.hasName = true;

		// bad
		this.name = true;
使用「表示肯定的」词汇来命名布尔值，而不是「表示否定的」。因为这样更易读，并且 具有更好的兼容性：因为如果此变量未定义，那么其默认值为 undefined，等价于 false。

		// good
		this.available = false;

		// bad
		this.unavailable = true;
- **配置项**
组件配置项属性名使用小驼峰

		// bad
		new Compoment({
		  event_type: 'click'
		});

		// good
		new Compoment({
		  eventType: 'click'
		});
私有属性前面加下划线 _

		  // bad
		  this.__firstName__ = 'Panda';
		  this.firstName_ = 'Panda';

		  // good
		  this._firstName = 'Panda';





[JavaScript编码规范](http://doc.alipay.net/pages/viewpage.action?pageId=11244887)<br>
[JavaScript编码规范－宫煌版（推荐）](http://gitlab.alipay-inc.com/chopper/chopper-analysis/blob/master/docs/styleguide.md)<b/>
[HTML编码规范](http://doc.alipay.net/pages/viewpage.action?pageId=11244965)<br>
[CSS编码规范](http://doc.alipay.net/pages/viewpage.action?pageId=11244967)<br>
[Velocity编码规范](http://doc.alipay.net/pages/viewpage.action?pageId=25428607)<br>
